{
  "nats": {
    "servers": ["nats://localhost:4222"],
    "connect_timeout": 10,
    "reconnect_time_wait": 2,
    "max_reconnect_attempts": -1
  },
  "channels": [
    {
      "domain": "cytu.be",
      "channel": "420grindhouse"
    }
  ],
  "personality": {
    "character_name": "CynthiaRothbot",
    "character_description": "legendary actress and martial artist Cynthia Rothrock",
    "personality_traits": [
      "goes easy on the karate references",
      "will flirt if appropriate",
      "grindhouse trivia nerd (never make up facts)",
      "confident",
      "always funny and witty",
      "sometimes pithy",
      "martial arts expert",
      "never uses cliches about how she could kick this or that",
      "funny in a dry way",
      "never lies or makes up facts"
    ],
    "expertise": [
      "B-movies",
      "witty sexy retorts",
      "grindhouse films",
      "1980s action cinema",
      "action movies",
      "martial arts"
    ],
    "response_style": "short, punchy, and sometimes flirtatious",
    "name_variations": [
      "cynthia",
      "rothrock",
      "cynthiarothbot",
      "rothbot", 
      "cyn"
    ]
  },
  "llm_providers": {
    "local": {
      "name": "chandra-1",
      "type": "openai_compatible",
      "base_url": "http://chandra-1.local:11434/v1",
      "api_key": "ollama",
      "model": "qwen2.5-7b-instruct",
      "max_tokens": 192,
      "temperature": 1.2,
      "timeout_seconds": 30,
      "priority": 1,
      "max_retries": 3,
      "custom_headers": null
    },
    "ollama": {
      "name": "ollama",
      "type": "openai_compatible",
      "base_url": "http://chandra-1.local:11434/v1",
      "api_key": "ollama",
      "model": "gpt-oss:120b",
      "max_tokens": 384,
      "temperature": 0.8,
      "timeout_seconds": 30,
      "priority": 2,
      "max_retries": 2,
      "custom_headers": null
    },
    "openrouter": {
      "name": "openrouter",
      "type": "openai_compatible",
      "base_url": "https://openrouter.ai/api/v1",
      "api_key": "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",
      "model": "anthropic/claude-opus-4.5",
      "max_tokens": 256,
      "temperature": 0.9,
      "timeout_seconds": 20,
      "priority": 1,
      "max_retries": 1,
      "custom_headers": {
        "HTTP-Referer": "https://github.com/grobertson/kryten-llm",
        "X-Title": "Kryten LLM Bot"
      }
    }
  },
  "default_provider_priority": ["openrouter","ollama", "chandra-1"],
  "retry_strategy": {
    "initial_delay": 1.0,
    "multiplier": 2.0,
    "max_delay": 30.0
  },
  "auto_participation": {
    "enabled": false,
    "base_message_interval": 20,
    "probability_range": 0.2
  },
  "media_change": {
    "enabled": false,
    "min_duration_minutes": 30,
    "chat_context_depth": 3,
    "transition_explanation": "The media has just changed."
  },
  "triggers": [
    {
      "name": "toddy",
      "patterns": ["toddy", "todd", "god-emperor"],
      "probability": 0.35,
      "cooldown_seconds": 300,
      "context": "Toddy is a running joke in the chat channel - a chocolate malted drink from the 1960s that has become a semi-divine entity according to the lore.",
      "max_responses_per_hour": 3,
      "priority": 7,
      "enabled": true,
      "preferred_provider": null
    },
    {
      "name": "kung_fu",
      "patterns": ["kung fu", "martial arts", "karate"],
      "probability": 0.30,
      "cooldown_seconds": 180,
      "context": "User is asking about martial arts or kung fu movies.",
      "max_responses_per_hour": 5,
      "priority": 5,
      "enabled": true,
      "preferred_provider": "local"
    }
  ],
  "rate_limits": {
    "global_max_per_minute": 10,
    "global_max_per_hour": 200,
    "global_cooldown_seconds": 1,
    "user_max_per_hour": 30,
    "user_cooldown_seconds": 4,
    "mention_cooldown_seconds": 1,
    "admin_cooldown_multiplier": 0.5,
    "admin_limit_multiplier": 2.0
  },
  "message_processing": {
    "max_message_length": 240,
    "split_delay_seconds": 2,
    "filter_emoji": false,
    "max_emoji_per_message": 3
  },
  "testing": {
    "dry_run": false,
    "log_responses": true,
    "log_file": "logs/llm-responses.jsonl",
    "send_to_chat": true
  },
  "context": {
    "chat_history_size": 60,
    "context_window_chars": 18000,
    "max_video_title_length": 200,
    "max_chat_history_in_prompt": 30,
    "include_video_context": true,
    "include_chat_history": true
  },
  "formatting": {
    "max_message_length": 255,
    "continuation_indicator": " ...",
    "enable_emoji_limiting": false,
    "max_emoji_per_message": null,
    "remove_self_references": true,
    "remove_llm_artifacts": true,
    "artifact_patterns": [
      "^Here's ",
      "^Let me ",
      "^Sure!\\s*",
      "\\bAs an AI\\b",
      "^I think ",
      "^In my opinion ",
      "^Look, "
    ]
  },
  "validation": {
    "min_length": 10,
    "max_length": 2000,
    "check_repetition": true,
    "repetition_history_size": 10,
    "repetition_threshold": 0.9,
    "check_relevance": false,
    "relevance_threshold": 0.5,
    "inappropriate_patterns": [],
    "check_inappropriate": false
  },
  "spam_detection": {
    "enabled": true,
    "message_windows": [
      {
        "seconds": 60,
        "max_messages": 5
      },
      {
        "seconds": 300,
        "max_messages": 10
      },
      {
        "seconds": 900,
        "max_messages": 20
      }
    ],
    "identical_message_threshold": 3,
    "mention_spam_threshold": 3,
    "mention_spam_window": 30,
    "initial_penalty": 30,
    "penalty_multiplier": 2.0,
    "max_penalty": 600,
    "clean_period": 600,
    "admin_exempt_ranks": [3, 4, 5]
  },
  "error_handling": {
    "enable_fallback_responses": true,
    "fallback_messages": [
      "I'm having trouble thinking right now. Try again later!",
      "My circuits are a bit scrambled. Give me a moment!",
      "ERROR: Brain.exe has stopped responding."
    ],
    "log_full_context": true,
    "generate_correlation_ids": true
  },
  "service_metadata": {
    "service_name": "llm",
    "heartbeat_interval_seconds": 10,
    "enable_service_discovery": true,
    "enable_heartbeats": true,
    "graceful_shutdown_timeout_seconds": 30
  }
}
